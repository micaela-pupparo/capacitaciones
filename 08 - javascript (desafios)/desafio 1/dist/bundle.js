(()=>{"use strict";function o(o){var e=a.find((function(e){return o.email===e.email}));if(!e)throw new Error("usuario no encontrado");return e}var e=new WeakMap,n=new WeakMap,a=[];function t(o,t,r){this.nombre=o,this.email=t,e.set(this,r),n.set(this,{logueado:!1,intentos:0});var i=[];this.agregarAcceso=function(){var o=(new Date).toISOString();i.push(o),i.length>5&&i.shift()},this.mostrarHistorialAcceso=function(){return i.slice()},a.push(this)}t.login=function(e){var a=o(e),t=n.get(a);if(a._contraseña===e._contraseña)return!0===t.logueado?console.log("".concat(a.nombre," ya estaba con la sesion iniciada")):(t.logueado=!0,t.intentos=0,a.agregarAcceso(),console.log("".concat(a.nombre," ha iniciado sesion!")));if(a._contraseña!==e._contraseña){if(t.intentos++,t.intentos>3)throw new Error("Cuenta bloqueada");console.log("contraseña incorrecta")}},t.logout=function(e){var a=o(e),t=n.get(a);return t.logueado=!1,t.intentos=0,console.log("".concat(a.nombre," ha cerrado sesion!"))},t.prototype.cambiarContraseña=function(o){var n;if(!("string"==typeof(n=o)&&n.length>4)||n.includes(" "))return console.log("contraseña invalida");e.set(this,o),console.log("contraseña cambiada con exito!")},t.prototype.verContenido=function(){console.log("miraste contenido!")},t.prototype.mostrarActividad=function(){return"".concat(this.nombre," últimos accesos:\n  ").concat(this.mostrarHistorialAcceso().join(", "))};var r=new WeakMap;function i(o,e,n){t.call(this,o,e,n),r.set(this,"admin")}function c(o,e,n){new t(o,e,n),r.set(this,"editor")}i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.agregarUsuario=function(o){var e=o.nombre,n=o.email,a=o._contraseña,r=function(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];for(var a=0,t=e;a<t.length;a++){var r=t[a];if("string"!=typeof r)return!1;if(r.length<1)return!1}return!0}(e,a,n),i=function(o){return!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)||(console.log("el mail debe ser válido"),!1)}(n),c=function(o){return!!/^[A-Za-z]+$/.test(o)||(console.log("el nombre puede contener solo letras"),!1)}(e),s=!!/^[A-Za-z0-9]+$/.test(a)||(console.log("la contraseña debe tener números y letras"),!1);r&&i&&c&&s&&(new t(e,n,a),console.log("".concat(e," fue creado con exito por ").concat(this.nombre)))},i.prototype.eliminarUsuario=function(e){var n=o(e);n&&(a=a.filter((function(o){return o.email!==n.email})),console.log("el usuario ".concat(n.nombre," ha sido eliminado por ").concat(this.nombre)))},c.prototype=Object.create(t.prototype),c.prototype.constructor=c,c.prototype.modificarCotenido=function(){console.log("modificaste contenido!")},new t("micaela","micaela@gmail.com","mica1234");var s=new t("belen","belen@gmail.com","belen1234"),l=new i("mauro","mauro@gmail.com","mauro"),m=(new c("matias","matias@gmail.com","matias123"),{nombre:"agus",email:"agus@gmail.com",_contraseña:"123"});try{l.agregarUsuario(m),l.agregarUsuario({nombre:"lorena",email:"lorena@gmail.com",_contraseña:"!!!"}),l.agregarUsuario({nombre:"123",email:"lorena@gmail.com",_contraseña:"lore1232"}),l.agregarUsuario({nombre:"lorena",email:"lore   na@gmail.com",_contraseña:"am123"}),l.eliminarUsuario(m),t.logout(s),t.login({nombre:"belen",email:"belen@gmail.com",_contraseña:"belen1234"}),t.login(s),s.cambiarContraseña("12345"),console.log(s.mostrarActividad())}catch(o){console.log(o)}})();