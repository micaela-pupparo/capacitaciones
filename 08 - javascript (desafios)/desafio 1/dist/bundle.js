(()=>{"use strict";function o(o){var e=t.find((function(e){return o.email===e.email}));if(!e)throw new Error("usuario no encontrado");return e}function e(o){return!!/^[A-Za-z0-9]+$/.test(o)||(console.log("la contraseña debe tener números y letras"),!1)}var n=new WeakMap,a=new WeakMap,t=[];function r(o,e,r){this.nombre=o,this.email=e,n.set(this,r),a.set(this,{logueado:!1,intentos:0});var i=[];this.agregarAcceso=function(){var o=(new Date).toISOString();i.push(o),i.length>5&&i.shift()},this.mostrarHistorialAcceso=function(){return i.slice()},t.push(this)}r.login=function(e){var n=o(e),t=a.get(n);if(n._contraseña===e._contraseña)return!0===t.logueado?console.log("".concat(n.nombre," ya estaba con la sesion iniciada")):(t.logueado=!0,t.intentos=0,n.agregarAcceso(),console.log("".concat(n.nombre," ha iniciado sesion!")));if(n._contraseña!==e._contraseña){if(t.intentos++,t.intentos>3)throw new Error("Cuenta bloqueada");console.log("contraseña incorrecta")}},r.logout=function(e){var n=o(e),t=a.get(n);return t.logueado=!1,t.intentos=0,console.log("".concat(n.nombre," ha cerrado sesion!"))},r.prototype.cambiarContraseña=function(o){if(e(o))return n.set(this,o),console.log("contraseña de ".concat(this.nombre," cambiada con éxito!"))},r.prototype.verContenido=function(){console.log("miraste contenido!")},r.prototype.mostrarActividad=function(){return"".concat(this.nombre," últimos accesos:\n  ").concat(this.mostrarHistorialAcceso().join(", "))};var i=new WeakMap;function c(o,e,n){r.call(this,o,e,n),i.set(this,"admin")}function s(o,e,n){r.call(this,o,e,n),i.set(this,"editor")}c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.prototype.agregarUsuario=function(o){var n=o.nombre,a=o.email,t=o._contraseña,i=function(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];for(var a=0,t=e;a<t.length;a++){var r=t[a];if("string"!=typeof r)return!1;if(r.length<1)return!1}return!0}(n,t,a),c=function(o){return!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)||(console.log("el mail debe ser válido"),!1)}(a),s=function(o){return!!/^[A-Za-z]+$/.test(o)||(console.log("el nombre puede contener solo letras"),!1)}(n),l=e(t);i&&c&&s&&l&&(new r(n,a,t),console.log("".concat(n," fue creado con exito por ").concat(this.nombre)))},c.prototype.eliminarUsuario=function(e){var n=o(e);n&&(t=t.filter((function(o){return o.email!==n.email})),console.log("el usuario ".concat(n.nombre," ha sido eliminado por ").concat(this.nombre)))},s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.modificarCotenido=function(){console.log("modificaste contenido!")};var l=new r("micaela","micaela@gmail.com","mica1234"),m=new r("belen","belen@gmail.com","belen1234"),u=new c("mauro","mauro@gmail.com","mauro"),g=new s("matias","matias@gmail.com","matias123"),f={nombre:"agus",email:"agus@gmail.com",_contraseña:"123"},d={nombre:"belen",email:"belen@gmail.com",_contraseña:"belen1234"};try{u.agregarUsuario(f),u.agregarUsuario({nombre:"lorena",email:"lorena@gmail.com",_contraseña:"!!!"}),u.agregarUsuario({nombre:"123",email:"lorena@gmail.com",_contraseña:"lore1232"}),u.agregarUsuario({nombre:"lorena",email:"lore   na@gmail.com",_contraseña:"am123"}),u.eliminarUsuario(f),g.modificarCotenido(),l.verContenido(),r.logout(m),r.login(d),r.login(d),r.login(d),r.login(d),m.cambiarContraseña("12345"),console.log(m.mostrarActividad())}catch(o){console.log(o)}})();